<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app.js" />
              <option name="originalContent" value="// 数据管理&#10;class DataManager {&#10;    constructor() {&#10;        this.records = this.load('records') || [];&#10;        this.categories = this.load('categories') || this.getDefaultCategories();&#10;        this.budget = this.load('budget') || 0;&#10;    }&#10;&#10;    getDefaultCategories() {&#10;        return [&#10;            { id: 1, name: '餐饮', icon: '' },&#10;            { id: 2, name: '交通', icon: '' },&#10;            { id: 3, name: '购物', icon: '️' },&#10;            { id: 4, name: '娱乐', icon: '' },&#10;            { id: 5, name: '医疗', icon: '' },&#10;            { id: 6, name: '住房', icon: '' },&#10;            { id: 7, name: '学习', icon: '' },&#10;            { id: 8, name: '其他', icon: '' }&#10;        ];&#10;    }&#10;&#10;    save(key, data) {&#10;        document.cookie = `${key}=${encodeURIComponent(JSON.stringify(data))}; max-age=31536000; path=/`;&#10;    }&#10;&#10;    load(key) {&#10;        const cookies = document.cookie.split(';');&#10;        for (let cookie of cookies) {&#10;            const [name, value] = cookie.trim().split('=');&#10;            if (name === key) {&#10;                try {&#10;                    return JSON.parse(decodeURIComponent(value));&#10;                } catch (e) {&#10;                    return null;&#10;                }&#10;            }&#10;        }&#10;        return null;&#10;    }&#10;&#10;    addRecord(record) {&#10;        record.id = Date.now();&#10;        this.records.unshift(record);&#10;        this.save('records', this.records);&#10;    }&#10;&#10;    addCategory(category) {&#10;        category.id = Date.now();&#10;        this.categories.push(category);&#10;        this.save('categories', this.categories);&#10;    }&#10;&#10;    setBudget(amount) {&#10;        this.budget = amount;&#10;        this.save('budget', this.budget);&#10;    }&#10;&#10;    getRecordsByPeriod(period, date) {&#10;        return this.records.filter(record =&gt; {&#10;            const recordDate = new Date(record.date);&#10;            const targetDate = new Date(date);&#10;&#10;            if (period === 'day') {&#10;                return recordDate.toDateString() === targetDate.toDateString();&#10;            } else if (period === 'month') {&#10;                return recordDate.getMonth() === targetDate.getMonth() &amp;&amp;&#10;                       recordDate.getFullYear() === targetDate.getFullYear();&#10;            } else if (period === 'year') {&#10;                return recordDate.getFullYear() === targetDate.getFullYear();&#10;            }&#10;        });&#10;    }&#10;&#10;    getMonthlySpent() {&#10;        const now = new Date();&#10;        return this.getRecordsByPeriod('month', now)&#10;            .reduce((sum, record) =&gt; sum + record.amount, 0);&#10;    }&#10;&#10;    getTodaySpent() {&#10;        const now = new Date();&#10;        return this.getRecordsByPeriod('day', now)&#10;            .reduce((sum, record) =&gt; sum + record.amount, 0);&#10;    }&#10;}&#10;&#10;const dataManager = new DataManager();&#10;&#10;// 页面导航&#10;function initNavigation() {&#10;    const navItems = document.querySelectorAll('.nav-item');&#10;    const pages = document.querySelectorAll('.page');&#10;&#10;    navItems.forEach(item =&gt; {&#10;        item.addEventListener('click', () =&gt; {&#10;            const targetPage = item.dataset.page;&#10;&#10;            navItems.forEach(nav =&gt; nav.classList.remove('active'));&#10;            pages.forEach(page =&gt; page.classList.remove('active'));&#10;&#10;            item.classList.add('active');&#10;            document.getElementById(`${targetPage}Page`).classList.add('active');&#10;&#10;            if (targetPage === 'stats') renderStats();&#10;            if (targetPage === 'trend') renderTrend();&#10;            if (targetPage === 'list') renderTimeline();&#10;        });&#10;    });&#10;}&#10;&#10;// 记账页面&#10;function initRecordPage() {&#10;    const categoryGrid = document.getElementById('categoryGrid');&#10;    const dateInput = document.getElementById('dateInput');&#10;    const photoInput = document.getElementById('photoInput');&#10;    const uploadBtn = document.getElementById('uploadBtn');&#10;    const saveBtn = document.getElementById('saveBtn');&#10;&#10;    // 设置默认值为当前时间，格式为 yyyy-MM-ddTHH:mm&#10;    const now = new Date();&#10;    dateInput.value = now.toISOString().slice(0,16);&#10;&#10;    renderCategories();&#10;&#10;    uploadBtn.addEventListener('click', () =&gt; photoInput.click());&#10;&#10;    photoInput.addEventListener('change', (e) =&gt; {&#10;        const file = e.target.files[0];&#10;        if (file) {&#10;            const reader = new FileReader();&#10;            reader.onload = (e) =&gt; {&#10;                const preview = document.getElementById('photoPreview');&#10;                const img = document.createElement('img');&#10;                img.src = e.target.result;&#10;                preview.innerHTML = '';&#10;                preview.appendChild(img);&#10;            };&#10;            reader.readAsDataURL(file);&#10;        }&#10;    });&#10;&#10;    saveBtn.addEventListener('click', () =&gt; {&#10;        const amount = parseFloat(document.getElementById('amountInput').value);&#10;        const selectedCategory = document.querySelector('.category-item.selected');&#10;        const date = dateInput.value;&#10;        const note = document.getElementById('noteInput').value;&#10;        const photoPreview = document.getElementById('photoPreview').querySelector('img');&#10;&#10;        if (!amount || !selectedCategory) {&#10;            alert('请输入金额并选择类别');&#10;            return;&#10;        }&#10;&#10;        const record = {&#10;            amount,&#10;            categoryId: parseInt(selectedCategory.dataset.id),&#10;            date,&#10;            note,&#10;            photo: photoPreview ? photoPreview.src : null&#10;        };&#10;&#10;        dataManager.addRecord(record);&#10;&#10;        // 重置表单&#10;        document.getElementById('amountInput').value = '';&#10;        document.getElementById('noteInput').value = '';&#10;        document.getElementById('photoPreview').innerHTML = '';&#10;        document.querySelector('.category-item.selected')?.classList.remove('selected');&#10;&#10;        updateBudgetDisplay();&#10;        alert('记账成功!');&#10;    });&#10;}&#10;&#10;function renderCategories() {&#10;    const categoryGrid = document.getElementById('categoryGrid');&#10;    categoryGrid.innerHTML = dataManager.categories.map(cat =&gt; `&#10;        &lt;div class=&quot;category-item&quot; data-id=&quot;${cat.id}&quot;&gt;&#10;            &lt;div class=&quot;category-icon&quot;&gt;${cat.icon}&lt;/div&gt;&#10;            &lt;div class=&quot;category-name&quot;&gt;${cat.name}&lt;/div&gt;&#10;        &lt;/div&gt;&#10;    `).join('');&#10;&#10;    categoryGrid.querySelectorAll('.category-item').forEach(item =&gt; {&#10;        item.addEventListener('click', () =&gt; {&#10;            document.querySelectorAll('.category-item').forEach(i =&gt; i.classList.remove('selected'));&#10;            item.classList.add('selected');&#10;        });&#10;    });&#10;}&#10;&#10;// 新增类别&#10;function initCategoryModal() {&#10;    const addBtn = document.getElementById('addCategoryBtn');&#10;    const modal = document.getElementById('categoryModal');&#10;    const cancelBtn = document.getElementById('cancelCategoryBtn');&#10;    const confirmBtn = document.getElementById('confirmCategoryBtn');&#10;&#10;    addBtn.addEventListener('click', () =&gt; modal.classList.add('show'));&#10;    cancelBtn.addEventListener('click', () =&gt; modal.classList.remove('show'));&#10;&#10;    confirmBtn.addEventListener('click', () =&gt; {&#10;        const name = document.getElementById('newCategoryName').value;&#10;        const icon = document.getElementById('newCategoryIcon').value;&#10;&#10;        if (name &amp;&amp; icon) {&#10;            dataManager.addCategory({ name, icon });&#10;            renderCategories();&#10;            updateTrendCategorySelect();&#10;            modal.classList.remove('show');&#10;            document.getElementById('newCategoryName').value = '';&#10;            document.getElementById('newCategoryIcon').value = '';&#10;        }&#10;    });&#10;}&#10;&#10;// 预算显示&#10;function initBudgetDisplay() {&#10;    const budgetAmount = document.getElementById('budgetAmount');&#10;    const modal = document.getElementById('budgetModal');&#10;    const cancelBtn = document.getElementById('cancelBudgetBtn');&#10;    const confirmBtn = document.getElementById('confirmBudgetBtn');&#10;&#10;    budgetAmount.addEventListener('click', () =&gt; modal.classList.add('show'));&#10;    cancelBtn.addEventListener('click', () =&gt; modal.classList.remove('show'));&#10;&#10;    confirmBtn.addEventListener('click', () =&gt; {&#10;        const amount = parseFloat(document.getElementById('budgetInput').value);&#10;        if (amount) {&#10;            dataManager.setBudget(amount);&#10;            updateBudgetDisplay();&#10;            modal.classList.remove('show');&#10;        }&#10;    });&#10;&#10;    updateBudgetDisplay();&#10;}&#10;&#10;function updateBudgetDisplay() {&#10;    const spent = dataManager.getMonthlySpent();&#10;    const budget = dataManager.budget;&#10;    const todaySpent = dataManager.getTodaySpent();&#10;&#10;    document.getElementById('budgetAmount').textContent = budget &gt; 0 ? `¥${budget}` : '点击设置';&#10;    document.getElementById('spentAmount').textContent = spent.toFixed(2);&#10;    document.getElementById('todaySpent').textContent = `¥${todaySpent.toFixed(2)}`;&#10;&#10;    if (budget &gt; 0) {&#10;        const percentage = Math.min((spent / budget) * 100, 100);&#10;        document.getElementById('progressFill').style.width = `${percentage}%`;&#10;&#10;        if (percentage &gt; 90) {&#10;            document.getElementById('progressFill').style.background = '#ef4444';&#10;        } else if (percentage &gt; 70) {&#10;            document.getElementById('progressFill').style.background = '#f59e0b';&#10;        }&#10;    }&#10;}&#10;&#10;// 统计页面&#10;function renderStats() {&#10;    const period = document.querySelector('.date-btn.active').dataset.period;&#10;    let dateStr = document.getElementById('statsDate').value || new Date().toISOString().slice(0,16);&#10;    let date;&#10;    // 修复日维度统计日期解析问题，兼容 datetime-local&#10;    if (dateStr &amp;&amp; period === 'day') {&#10;        // dateStr: yyyy-MM-ddTHH:mm&#10;        const [datePart] = dateStr.split('T');&#10;        const [year, month, day] = datePart.split('-').map(Number);&#10;        date = new Date(year, month - 1, day);&#10;    } else if (dateStr) {&#10;        date = new Date(dateStr);&#10;    } else {&#10;        date = new Date();&#10;    }&#10;    const records = dataManager.getRecordsByPeriod(period, date);&#10;&#10;    const categoryStats = {};&#10;    records.forEach(record =&gt; {&#10;        const cat = dataManager.categories.find(c =&gt; c.id === record.categoryId);&#10;        if (cat) {&#10;            if (!categoryStats[cat.name]) {&#10;                categoryStats[cat.name] = { amount: 0, icon: cat.icon };&#10;            }&#10;            categoryStats[cat.name].amount += record.amount;&#10;        }&#10;    });&#10;&#10;    renderPieChart(categoryStats);&#10;    renderStatsList(categoryStats);&#10;}&#10;&#10;function renderPieChart(data) {&#10;    const ctx = document.getElementById('pieChart');&#10;    if (window.pieChartInstance) window.pieChartInstance.destroy();&#10;&#10;    window.pieChartInstance = new Chart(ctx, {&#10;        type: 'pie',&#10;        data: {&#10;            labels: Object.keys(data),&#10;            datasets: [{&#10;                data: Object.values(data).map(d =&gt; d.amount),&#10;                backgroundColor: [&#10;                    '#667eea', '#764ba2', '#f093fb', '#4facfe',&#10;                    '#43e97b', '#fa709a', '#fee140', '#30cfd0'&#10;                ]&#10;            }]&#10;        },&#10;        options: {&#10;            responsive: true,&#10;            plugins: {&#10;                legend: { position: 'bottom' }&#10;            }&#10;        }&#10;    });&#10;}&#10;&#10;function renderStatsList(data) {&#10;    const statsList = document.getElementById('statsList');&#10;    statsList.innerHTML = Object.entries(data).map(([name, info]) =&gt; `&#10;        &lt;div class=&quot;stats-item&quot;&gt;&#10;            &lt;div class=&quot;stats-category&quot;&gt;&#10;                &lt;span class=&quot;stats-icon&quot;&gt;${info.icon}&lt;/span&gt;&#10;                &lt;span&gt;${name}&lt;/span&gt;&#10;            &lt;/div&gt;&#10;            &lt;span class=&quot;stats-amount&quot;&gt;¥${info.amount.toFixed(2)}&lt;/span&gt;&#10;        &lt;/div&gt;&#10;    `).join('');&#10;}&#10;&#10;function initStatsPage() {&#10;    // 设置默认值为当前时间，格式为 yyyy-MM-ddTHH:mm&#10;    document.getElementById('statsDate').value = new Date().toISOString().slice(0,16);&#10;&#10;    document.querySelectorAll('.date-btn').forEach(btn =&gt; {&#10;        btn.addEventListener('click', () =&gt; {&#10;            document.querySelectorAll('.date-btn').forEach(b =&gt; b.classList.remove('active'));&#10;            btn.classList.add('active');&#10;            renderStats();&#10;        });&#10;    });&#10;&#10;    document.getElementById('statsDate').addEventListener('change', renderStats);&#10;}&#10;&#10;// 趋势页面&#10;function renderTrend() {&#10;    const category = document.getElementById('trendCategory').value;&#10;    const days = parseInt(document.getElementById('trendPeriod').value);&#10;&#10;    const data = [];&#10;    const labels = [];&#10;&#10;    for (let i = days - 1; i &gt;= 0; i--) {&#10;        const date = new Date();&#10;        date.setDate(date.getDate() - i);&#10;        labels.push(date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' }));&#10;&#10;        const dayRecords = dataManager.getRecordsByPeriod('day', date);&#10;        const total = dayRecords&#10;            .filter(r =&gt; category === 'all' || r.categoryId === parseInt(category))&#10;            .reduce((sum, r) =&gt; sum + r.amount, 0);&#10;        data.push(total);&#10;    }&#10;&#10;    renderLineChart(labels, data);&#10;}&#10;&#10;function renderLineChart(labels, data) {&#10;    const ctx = document.getElementById('lineChart');&#10;    if (window.lineChartInstance) window.lineChartInstance.destroy();&#10;&#10;    window.lineChartInstance = new Chart(ctx, {&#10;        type: 'line',&#10;        data: {&#10;            labels,&#10;            datasets: [{&#10;                label: '消费金额',&#10;                data,&#10;                borderColor: '#667eea',&#10;                backgroundColor: 'rgba(102, 126, 234, 0.1)',&#10;                tension: 0.4,&#10;                fill: true&#10;            }]&#10;        },&#10;        options: {&#10;            responsive: true,&#10;            plugins: {&#10;                legend: { display: false }&#10;            },&#10;            scales: {&#10;                y: { beginAtZero: true }&#10;            }&#10;        }&#10;    });&#10;}&#10;&#10;function initTrendPage() {&#10;    updateTrendCategorySelect();&#10;    document.getElementById('trendCategory').addEventListener('change', renderTrend);&#10;    document.getElementById('trendPeriod').addEventListener('change', renderTrend);&#10;}&#10;&#10;function updateTrendCategorySelect() {&#10;    const select = document.getElementById('trendCategory');&#10;    select.innerHTML = '&lt;option value=&quot;all&quot;&gt;全部类别&lt;/option&gt;' +&#10;        dataManager.categories.map(cat =&gt;&#10;            `&lt;option value=&quot;${cat.id}&quot;&gt;${cat.icon} ${cat.name}&lt;/option&gt;`&#10;        ).join('');&#10;}&#10;&#10;// 明细页面&#10;function renderTimeline() {&#10;    const timeline = document.getElementById('timeline');&#10;    const groupedRecords = {};&#10;&#10;    dataManager.records.forEach(record =&gt; {&#10;        const date = new Date(record.date).toLocaleDateString('zh-CN');&#10;        if (!groupedRecords[date]) groupedRecords[date] = [];&#10;        groupedRecords[date].push(record);&#10;    });&#10;&#10;    timeline.innerHTML = Object.entries(groupedRecords).map(([date, records]) =&gt; `&#10;        &lt;div class=&quot;timeline-date&quot;&gt;${date}&lt;/div&gt;&#10;        ${records.map(record =&gt; {&#10;            const cat = dataManager.categories.find(c =&gt; c.id === record.categoryId);&#10;            return `&#10;                &lt;div class=&quot;timeline-item&quot;&gt;&#10;                    &lt;div class=&quot;timeline-header&quot;&gt;&#10;                        &lt;div class=&quot;timeline-category&quot;&gt;&#10;                            &lt;span class=&quot;timeline-icon&quot;&gt;${cat?.icon || ''}&lt;/span&gt;&#10;                            &lt;span&gt;${cat?.name || '未知'}&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;span class=&quot;timeline-amount&quot;&gt;¥${record.amount.toFixed(2)}&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                    ${record.note ? `&lt;div class=&quot;timeline-note&quot;&gt;${record.note}&lt;/div&gt;` : ''}&#10;                    ${record.photo ? `&lt;img src=&quot;${record.photo}&quot; class=&quot;timeline-photo&quot;&gt;` : ''}&#10;                &lt;/div&gt;&#10;            `;&#10;        }).join('')}&#10;    `).join('');&#10;}&#10;&#10;// 初始化&#10;document.addEventListener('DOMContentLoaded', () =&gt; {&#10;    initNavigation();&#10;    initRecordPage();&#10;    initCategoryModal();&#10;    initBudgetDisplay();&#10;    initStatsPage();&#10;    initTrendPage();&#10;});&#10;&#10;" />
              <option name="updatedContent" value="// 数据管理&#10;class DataManager {&#10;    constructor() {&#10;        this.records = this.load('records') || [];&#10;        this.categories = this.load('categories') || this.getDefaultCategories();&#10;        this.budget = this.load('budget') || 0;&#10;    }&#10;&#10;    getDefaultCategories() {&#10;        return [&#10;            { id: 1, name: '餐饮', icon: '' },&#10;            { id: 2, name: '交通', icon: '' },&#10;            { id: 3, name: '购物', icon: '️' },&#10;            { id: 4, name: '娱乐', icon: '' },&#10;            { id: 5, name: '医疗', icon: '' },&#10;            { id: 6, name: '住房', icon: '' },&#10;            { id: 7, name: '学习', icon: '' },&#10;            { id: 8, name: '其他', icon: '' }&#10;        ];&#10;    }&#10;&#10;    save(key, data) {&#10;        document.cookie = `${key}=${encodeURIComponent(JSON.stringify(data))}; max-age=31536000; path=/`;&#10;    }&#10;&#10;    load(key) {&#10;        const cookies = document.cookie.split(';');&#10;        for (let cookie of cookies) {&#10;            const [name, value] = cookie.trim().split('=');&#10;            if (name === key) {&#10;                try {&#10;                    return JSON.parse(decodeURIComponent(value));&#10;                } catch (e) {&#10;                    return null;&#10;                }&#10;            }&#10;        }&#10;        return null;&#10;    }&#10;&#10;    addRecord(record) {&#10;        record.id = Date.now();&#10;        this.records.unshift(record);&#10;        this.save('records', this.records);&#10;    }&#10;&#10;    addCategory(category) {&#10;        category.id = Date.now();&#10;        this.categories.push(category);&#10;        this.save('categories', this.categories);&#10;    }&#10;&#10;    setBudget(amount) {&#10;        this.budget = amount;&#10;        this.save('budget', this.budget);&#10;    }&#10;&#10;    getRecordsByPeriod(period, date) {&#10;        return this.records.filter(record =&gt; {&#10;            const recordDate = new Date(record.date);&#10;            const targetDate = new Date(date);&#10;&#10;            if (period === 'day') {&#10;                return recordDate.toDateString() === targetDate.toDateString();&#10;            } else if (period === 'month') {&#10;                return recordDate.getMonth() === targetDate.getMonth() &amp;&amp;&#10;                       recordDate.getFullYear() === targetDate.getFullYear();&#10;            } else if (period === 'year') {&#10;                return recordDate.getFullYear() === targetDate.getFullYear();&#10;            }&#10;        });&#10;    }&#10;&#10;    getMonthlySpent() {&#10;        const now = new Date();&#10;        return this.getRecordsByPeriod('month', now)&#10;            .reduce((sum, record) =&gt; sum + record.amount, 0);&#10;    }&#10;&#10;    getTodaySpent() {&#10;        const now = new Date();&#10;        return this.getRecordsByPeriod('day', now)&#10;            .reduce((sum, record) =&gt; sum + record.amount, 0);&#10;    }&#10;}&#10;&#10;const dataManager = new DataManager();&#10;&#10;// 页面导航&#10;function initNavigation() {&#10;    const navItems = document.querySelectorAll('.nav-item');&#10;    const pages = document.querySelectorAll('.page');&#10;&#10;    navItems.forEach(item =&gt; {&#10;        item.addEventListener('click', () =&gt; {&#10;            const targetPage = item.dataset.page;&#10;&#10;            navItems.forEach(nav =&gt; nav.classList.remove('active'));&#10;            pages.forEach(page =&gt; page.classList.remove('active'));&#10;&#10;            item.classList.add('active');&#10;            document.getElementById(`${targetPage}Page`).classList.add('active');&#10;&#10;            if (targetPage === 'stats') renderStats();&#10;            if (targetPage === 'trend') renderTrend();&#10;            if (targetPage === 'list') renderTimeline();&#10;        });&#10;    });&#10;}&#10;&#10;// 记账页面&#10;function initRecordPage() {&#10;    const categoryGrid = document.getElementById('categoryGrid');&#10;    const dateInput = document.getElementById('dateInput');&#10;    const photoInput = document.getElementById('photoInput');&#10;    const uploadBtn = document.getElementById('uploadBtn');&#10;    const saveBtn = document.getElementById('saveBtn');&#10;    const toggleCategoryBtn = document.getElementById('toggleCategoryBtn');&#10;&#10;    // 设置默认值为当前时间，格式为 yyyy-MM-ddTHH:mm&#10;    const now = new Date();&#10;    dateInput.value = now.toISOString().slice(0,16);&#10;&#10;    renderCategories();&#10;&#10;    uploadBtn.addEventListener('click', () =&gt; photoInput.click());&#10;&#10;    photoInput.addEventListener('change', (e) =&gt; {&#10;        const file = e.target.files[0];&#10;        if (file) {&#10;            const reader = new FileReader();&#10;            reader.onload = (e) =&gt; {&#10;                const preview = document.getElementById('photoPreview');&#10;                const img = document.createElement('img');&#10;                img.src = e.target.result;&#10;                preview.innerHTML = '';&#10;                preview.appendChild(img);&#10;            };&#10;            reader.readAsDataURL(file);&#10;        }&#10;    });&#10;&#10;    // 类别展开/收起&#10;    toggleCategoryBtn.addEventListener('click', () =&gt; {&#10;        categoryGrid.classList.toggle('expanded');&#10;        const toggleText = toggleCategoryBtn.querySelector('.toggle-text');&#10;        if (categoryGrid.classList.contains('expanded')) {&#10;            toggleText.textContent = '收起';&#10;        } else {&#10;            toggleText.textContent = '展开更多';&#10;        }&#10;    });&#10;&#10;    saveBtn.addEventListener('click', () =&gt; {&#10;        const amount = parseFloat(document.getElementById('amountInput').value);&#10;        const selectedCategory = document.querySelector('.category-item.selected');&#10;        const date = dateInput.value;&#10;        const note = document.getElementById('noteInput').value;&#10;        const photoPreview = document.getElementById('photoPreview').querySelector('img');&#10;&#10;        if (!amount || !selectedCategory) {&#10;            alert('请输入金额并选择类别');&#10;            return;&#10;        }&#10;&#10;        const record = {&#10;            amount,&#10;            categoryId: parseInt(selectedCategory.dataset.id),&#10;            date,&#10;            note,&#10;            photo: photoPreview ? photoPreview.src : null&#10;        };&#10;&#10;        dataManager.addRecord(record);&#10;&#10;        // 重置表单&#10;        document.getElementById('amountInput').value = '';&#10;        document.getElementById('noteInput').value = '';&#10;        document.getElementById('photoPreview').innerHTML = '';&#10;        document.querySelector('.category-item.selected')?.classList.remove('selected');&#10;&#10;        updateBudgetDisplay();&#10;        alert('记账成功!');&#10;    });&#10;}&#10;&#10;function renderCategories() {&#10;    const categoryGrid = document.getElementById('categoryGrid');&#10;    categoryGrid.innerHTML = dataManager.categories.map(cat =&gt; `&#10;        &lt;div class=&quot;category-item&quot; data-id=&quot;${cat.id}&quot;&gt;&#10;            &lt;div class=&quot;category-icon&quot;&gt;${cat.icon}&lt;/div&gt;&#10;            &lt;div class=&quot;category-name&quot;&gt;${cat.name}&lt;/div&gt;&#10;        &lt;/div&gt;&#10;    `).join('');&#10;&#10;    categoryGrid.querySelectorAll('.category-item').forEach(item =&gt; {&#10;        item.addEventListener('click', () =&gt; {&#10;            document.querySelectorAll('.category-item').forEach(i =&gt; i.classList.remove('selected'));&#10;            item.classList.add('selected');&#10;        });&#10;    });&#10;}&#10;&#10;// 新增类别&#10;function initCategoryModal() {&#10;    const addBtn = document.getElementById('addCategoryBtn');&#10;    const modal = document.getElementById('categoryModal');&#10;    const cancelBtn = document.getElementById('cancelCategoryBtn');&#10;    const confirmBtn = document.getElementById('confirmCategoryBtn');&#10;&#10;    addBtn.addEventListener('click', () =&gt; modal.classList.add('show'));&#10;    cancelBtn.addEventListener('click', () =&gt; modal.classList.remove('show'));&#10;&#10;    confirmBtn.addEventListener('click', () =&gt; {&#10;        const name = document.getElementById('newCategoryName').value;&#10;        const icon = document.getElementById('newCategoryIcon').value;&#10;&#10;        if (name &amp;&amp; icon) {&#10;            dataManager.addCategory({ name, icon });&#10;            renderCategories();&#10;            updateTrendCategorySelect();&#10;            modal.classList.remove('show');&#10;            document.getElementById('newCategoryName').value = '';&#10;            document.getElementById('newCategoryIcon').value = '';&#10;        }&#10;    });&#10;}&#10;&#10;// 预算显示&#10;function initBudgetDisplay() {&#10;    const budgetAmount = document.getElementById('budgetAmount');&#10;    const modal = document.getElementById('budgetModal');&#10;    const cancelBtn = document.getElementById('cancelBudgetBtn');&#10;    const confirmBtn = document.getElementById('confirmBudgetBtn');&#10;&#10;    budgetAmount.addEventListener('click', () =&gt; modal.classList.add('show'));&#10;    cancelBtn.addEventListener('click', () =&gt; modal.classList.remove('show'));&#10;&#10;    confirmBtn.addEventListener('click', () =&gt; {&#10;        const amount = parseFloat(document.getElementById('budgetInput').value);&#10;        if (amount) {&#10;            dataManager.setBudget(amount);&#10;            updateBudgetDisplay();&#10;            modal.classList.remove('show');&#10;        }&#10;    });&#10;&#10;    updateBudgetDisplay();&#10;}&#10;&#10;function updateBudgetDisplay() {&#10;    const spent = dataManager.getMonthlySpent();&#10;    const budget = dataManager.budget;&#10;    const todaySpent = dataManager.getTodaySpent();&#10;&#10;    document.getElementById('budgetAmount').textContent = budget &gt; 0 ? `¥${budget}` : '点击设置';&#10;    document.getElementById('spentAmount').textContent = spent.toFixed(2);&#10;    document.getElementById('todaySpent').textContent = `¥${todaySpent.toFixed(2)}`;&#10;&#10;    if (budget &gt; 0) {&#10;        const percentage = Math.min((spent / budget) * 100, 100);&#10;        document.getElementById('progressFill').style.width = `${percentage}%`;&#10;&#10;        if (percentage &gt; 90) {&#10;            document.getElementById('progressFill').style.background = '#ef4444';&#10;        } else if (percentage &gt; 70) {&#10;            document.getElementById('progressFill').style.background = '#f59e0b';&#10;        }&#10;    }&#10;}&#10;&#10;// 统计页面&#10;function renderStats() {&#10;    const period = document.querySelector('.date-btn.active').dataset.period;&#10;    let dateStr = document.getElementById('statsDate').value || new Date().toISOString().slice(0,16);&#10;    let date;&#10;    // 修复日维度统计日期解析问题，兼容 datetime-local&#10;    if (dateStr &amp;&amp; period === 'day') {&#10;        // dateStr: yyyy-MM-ddTHH:mm&#10;        const [datePart] = dateStr.split('T');&#10;        const [year, month, day] = datePart.split('-').map(Number);&#10;        date = new Date(year, month - 1, day);&#10;    } else if (dateStr) {&#10;        date = new Date(dateStr);&#10;    } else {&#10;        date = new Date();&#10;    }&#10;    const records = dataManager.getRecordsByPeriod(period, date);&#10;&#10;    const categoryStats = {};&#10;    records.forEach(record =&gt; {&#10;        const cat = dataManager.categories.find(c =&gt; c.id === record.categoryId);&#10;        if (cat) {&#10;            if (!categoryStats[cat.name]) {&#10;                categoryStats[cat.name] = { amount: 0, icon: cat.icon };&#10;            }&#10;            categoryStats[cat.name].amount += record.amount;&#10;        }&#10;    });&#10;&#10;    renderPieChart(categoryStats);&#10;    renderStatsList(categoryStats);&#10;}&#10;&#10;function renderPieChart(data) {&#10;    const ctx = document.getElementById('pieChart');&#10;    if (window.pieChartInstance) window.pieChartInstance.destroy();&#10;&#10;    window.pieChartInstance = new Chart(ctx, {&#10;        type: 'pie',&#10;        data: {&#10;            labels: Object.keys(data),&#10;            datasets: [{&#10;                data: Object.values(data).map(d =&gt; d.amount),&#10;                backgroundColor: [&#10;                    '#667eea', '#764ba2', '#f093fb', '#4facfe',&#10;                    '#43e97b', '#fa709a', '#fee140', '#30cfd0'&#10;                ]&#10;            }]&#10;        },&#10;        options: {&#10;            responsive: true,&#10;            plugins: {&#10;                legend: { position: 'bottom' }&#10;            }&#10;        }&#10;    });&#10;}&#10;&#10;function renderStatsList(data) {&#10;    const statsList = document.getElementById('statsList');&#10;    statsList.innerHTML = Object.entries(data).map(([name, info]) =&gt; `&#10;        &lt;div class=&quot;stats-item&quot;&gt;&#10;            &lt;div class=&quot;stats-category&quot;&gt;&#10;                &lt;span class=&quot;stats-icon&quot;&gt;${info.icon}&lt;/span&gt;&#10;                &lt;span&gt;${name}&lt;/span&gt;&#10;            &lt;/div&gt;&#10;            &lt;span class=&quot;stats-amount&quot;&gt;¥${info.amount.toFixed(2)}&lt;/span&gt;&#10;        &lt;/div&gt;&#10;    `).join('');&#10;}&#10;&#10;function initStatsPage() {&#10;    // 设置默认值为当前时间，格式为 yyyy-MM-ddTHH:mm&#10;    document.getElementById('statsDate').value = new Date().toISOString().slice(0,16);&#10;&#10;    document.querySelectorAll('.date-btn').forEach(btn =&gt; {&#10;        btn.addEventListener('click', () =&gt; {&#10;            document.querySelectorAll('.date-btn').forEach(b =&gt; b.classList.remove('active'));&#10;            btn.classList.add('active');&#10;            renderStats();&#10;        });&#10;    });&#10;&#10;    document.getElementById('statsDate').addEventListener('change', renderStats);&#10;}&#10;&#10;// 趋势页面&#10;function renderTrend() {&#10;    const category = document.getElementById('trendCategory').value;&#10;    const days = parseInt(document.getElementById('trendPeriod').value);&#10;&#10;    const data = [];&#10;    const labels = [];&#10;&#10;    for (let i = days - 1; i &gt;= 0; i--) {&#10;        const date = new Date();&#10;        date.setDate(date.getDate() - i);&#10;        labels.push(date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' }));&#10;&#10;        const dayRecords = dataManager.getRecordsByPeriod('day', date);&#10;        const total = dayRecords&#10;            .filter(r =&gt; category === 'all' || r.categoryId === parseInt(category))&#10;            .reduce((sum, r) =&gt; sum + r.amount, 0);&#10;        data.push(total);&#10;    }&#10;&#10;    renderLineChart(labels, data);&#10;}&#10;&#10;function renderLineChart(labels, data) {&#10;    const ctx = document.getElementById('lineChart');&#10;    if (window.lineChartInstance) window.lineChartInstance.destroy();&#10;&#10;    window.lineChartInstance = new Chart(ctx, {&#10;        type: 'line',&#10;        data: {&#10;            labels,&#10;            datasets: [{&#10;                label: '消费金额',&#10;                data,&#10;                borderColor: '#667eea',&#10;                backgroundColor: 'rgba(102, 126, 234, 0.1)',&#10;                tension: 0.4,&#10;                fill: true&#10;            }]&#10;        },&#10;        options: {&#10;            responsive: true,&#10;            plugins: {&#10;                legend: { display: false }&#10;            },&#10;            scales: {&#10;                y: { beginAtZero: true }&#10;            }&#10;        }&#10;    });&#10;}&#10;&#10;function initTrendPage() {&#10;    updateTrendCategorySelect();&#10;    document.getElementById('trendCategory').addEventListener('change', renderTrend);&#10;    document.getElementById('trendPeriod').addEventListener('change', renderTrend);&#10;}&#10;&#10;function updateTrendCategorySelect() {&#10;    const select = document.getElementById('trendCategory');&#10;    select.innerHTML = '&lt;option value=&quot;all&quot;&gt;全部类别&lt;/option&gt;' +&#10;        dataManager.categories.map(cat =&gt;&#10;            `&lt;option value=&quot;${cat.id}&quot;&gt;${cat.icon} ${cat.name}&lt;/option&gt;`&#10;        ).join('');&#10;}&#10;&#10;// 明细页面&#10;function renderTimeline() {&#10;    const timeline = document.getElementById('timeline');&#10;    const groupedRecords = {};&#10;&#10;    dataManager.records.forEach(record =&gt; {&#10;        const date = new Date(record.date).toLocaleDateString('zh-CN');&#10;        if (!groupedRecords[date]) groupedRecords[date] = [];&#10;        groupedRecords[date].push(record);&#10;    });&#10;&#10;    timeline.innerHTML = Object.entries(groupedRecords).map(([date, records]) =&gt; `&#10;        &lt;div class=&quot;timeline-date&quot;&gt;${date}&lt;/div&gt;&#10;        ${records.map(record =&gt; {&#10;            const cat = dataManager.categories.find(c =&gt; c.id === record.categoryId);&#10;            return `&#10;                &lt;div class=&quot;timeline-item&quot;&gt;&#10;                    &lt;div class=&quot;timeline-header&quot;&gt;&#10;                        &lt;div class=&quot;timeline-category&quot;&gt;&#10;                            &lt;span class=&quot;timeline-icon&quot;&gt;${cat?.icon || ''}&lt;/span&gt;&#10;                            &lt;span&gt;${cat?.name || '未知'}&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;span class=&quot;timeline-amount&quot;&gt;¥${record.amount.toFixed(2)}&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                    ${record.note ? `&lt;div class=&quot;timeline-note&quot;&gt;${record.note}&lt;/div&gt;` : ''}&#10;                    ${record.photo ? `&lt;img src=&quot;${record.photo}&quot; class=&quot;timeline-photo&quot;&gt;` : ''}&#10;                &lt;/div&gt;&#10;            `;&#10;        }).join('')}&#10;    `).join('');&#10;}&#10;&#10;// 初始化&#10;document.addEventListener('DOMContentLoaded', () =&gt; {&#10;    initNavigation();&#10;    initRecordPage();&#10;    initCategoryModal();&#10;    initBudgetDisplay();&#10;    initStatsPage();&#10;    initTrendPage();&#10;});&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/index.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/index.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;zh-CN&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;&gt;&#10;    &lt;title&gt;记账本&lt;/title&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;&lt;!-- 头部预算进度 --&gt;&#10;&lt;div class=&quot;budget-header&quot;&gt;&#10;    &lt;div class=&quot;budget-info&quot;&gt;&#10;        &lt;div&gt;&#10;            &lt;div class=&quot;budget-label&quot;&gt;本月预算&lt;/div&gt;&#10;            &lt;div class=&quot;budget-amount&quot; id=&quot;budgetAmount&quot;&gt;未设置&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div&gt;&#10;            &lt;div class=&quot;budget-label&quot;&gt;今日支出&lt;/div&gt;&#10;            &lt;div class=&quot;budget-today&quot; id=&quot;todaySpent&quot;&gt;¥0.00&lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;budget-progress&quot;&gt;&#10;        &lt;div class=&quot;progress-bar&quot;&gt;&#10;            &lt;div class=&quot;progress-fill&quot; id=&quot;progressFill&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;budget-spent&quot;&gt;已花费: ¥&lt;span id=&quot;spentAmount&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 底部导航 --&gt;&#10;&lt;div class=&quot;bottom-nav&quot;&gt;&#10;    &lt;div class=&quot;nav-item active&quot; data-page=&quot;record&quot;&gt;&#10;        &lt;span class=&quot;nav-icon&quot;&gt;✏️&lt;/span&gt;&#10;        &lt;span class=&quot;nav-label&quot;&gt;记账&lt;/span&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;nav-item&quot; data-page=&quot;stats&quot;&gt;&#10;        &lt;span class=&quot;nav-icon&quot;&gt;&lt;/span&gt;&#10;        &lt;span class=&quot;nav-label&quot;&gt;统计&lt;/span&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;nav-item&quot; data-page=&quot;trend&quot;&gt;&#10;        &lt;span class=&quot;nav-icon&quot;&gt;&lt;/span&gt;&#10;        &lt;span class=&quot;nav-label&quot;&gt;趋势&lt;/span&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;nav-item&quot; data-page=&quot;list&quot;&gt;&#10;        &lt;span class=&quot;nav-icon&quot;&gt;&lt;/span&gt;&#10;        &lt;span class=&quot;nav-label&quot;&gt;明细&lt;/span&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 记账页面 --&gt;&#10;&lt;div class=&quot;page active&quot; id=&quot;recordPage&quot;&gt;&#10;    &lt;div class=&quot;page-content&quot;&gt;&#10;        &lt;div class=&quot;amount-input&quot;&gt;&#10;            &lt;span class=&quot;currency&quot;&gt;¥&lt;/span&gt;&#10;            &lt;input type=&quot;number&quot; id=&quot;amountInput&quot; placeholder=&quot;0.00&quot; step=&quot;0.01&quot;&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;form-group&quot;&gt;&#10;            &lt;label&gt;类别&lt;/label&gt;&#10;            &lt;div class=&quot;category-grid&quot; id=&quot;categoryGrid&quot;&gt;&lt;/div&gt;&#10;            &lt;button class=&quot;btn-add-category&quot; id=&quot;addCategoryBtn&quot;&gt;+ 新增类别&lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;form-group&quot;&gt;&#10;            &lt;label&gt;日期&lt;/label&gt;&#10;            &lt;input type=&quot;datetime-local&quot; id=&quot;dateInput&quot; class=&quot;input-field&quot;&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;form-group&quot;&gt;&#10;            &lt;label&gt;备注&lt;/label&gt;&#10;            &lt;textarea id=&quot;noteInput&quot; class=&quot;input-field&quot; placeholder=&quot;添加备注...&quot;&gt;&lt;/textarea&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;form-group&quot;&gt;&#10;            &lt;label&gt;照片&lt;/label&gt;&#10;            &lt;div class=&quot;photo-upload&quot;&gt;&#10;                &lt;input type=&quot;file&quot; id=&quot;photoInput&quot; accept=&quot;image/*&quot; style=&quot;display: none;&quot;&gt;&#10;                &lt;div class=&quot;photo-preview&quot; id=&quot;photoPreview&quot;&gt;&lt;/div&gt;&#10;                &lt;button class=&quot;btn-upload&quot; id=&quot;uploadBtn&quot;&gt; 上传照片&lt;/button&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;button class=&quot;btn-primary&quot; id=&quot;saveBtn&quot;&gt;保存&lt;/button&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 统计页面 --&gt;&#10;&lt;div class=&quot;page&quot; id=&quot;statsPage&quot;&gt;&#10;    &lt;div class=&quot;page-content&quot;&gt;&#10;        &lt;div class=&quot;date-selector&quot;&gt;&#10;            &lt;button class=&quot;date-btn active&quot; data-period=&quot;day&quot;&gt;日&lt;/button&gt;&#10;            &lt;button class=&quot;date-btn&quot; data-period=&quot;month&quot;&gt;月&lt;/button&gt;&#10;            &lt;button class=&quot;date-btn&quot; data-period=&quot;year&quot;&gt;年&lt;/button&gt;&#10;            &lt;input type=&quot;datetime-local&quot; id=&quot;statsDate&quot; class=&quot;date-input&quot;&gt;&#10;        &lt;/div&gt;&#10;        &lt;canvas id=&quot;pieChart&quot;&gt;&lt;/canvas&gt;&#10;        &lt;div class=&quot;stats-list&quot; id=&quot;statsList&quot;&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 趋势页面 --&gt;&#10;&lt;div class=&quot;page&quot; id=&quot;trendPage&quot;&gt;&#10;    &lt;div class=&quot;page-content&quot;&gt;&#10;        &lt;div class=&quot;trend-controls&quot;&gt;&#10;            &lt;select id=&quot;trendCategory&quot; class=&quot;select-field&quot;&gt;&#10;                &lt;option value=&quot;all&quot;&gt;全部类别&lt;/option&gt;&#10;            &lt;/select&gt;&#10;            &lt;select id=&quot;trendPeriod&quot; class=&quot;select-field&quot;&gt;&#10;                &lt;option value=&quot;7&quot;&gt;最近7天&lt;/option&gt;&#10;                &lt;option value=&quot;30&quot;&gt;最近30天&lt;/option&gt;&#10;                &lt;option value=&quot;90&quot;&gt;最近90天&lt;/option&gt;&#10;            &lt;/select&gt;&#10;        &lt;/div&gt;&#10;        &lt;canvas id=&quot;lineChart&quot;&gt;&lt;/canvas&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 明细页面 --&gt;&#10;&lt;div class=&quot;page&quot; id=&quot;listPage&quot;&gt;&#10;    &lt;div class=&quot;page-content&quot;&gt;&#10;        &lt;div class=&quot;timeline&quot; id=&quot;timeline&quot;&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 模态框 --&gt;&#10;&lt;div class=&quot;modal&quot; id=&quot;categoryModal&quot;&gt;&#10;    &lt;div class=&quot;modal-content&quot;&gt;&#10;        &lt;h3&gt;新增类别&lt;/h3&gt;&#10;        &lt;input type=&quot;text&quot; id=&quot;newCategoryName&quot; class=&quot;input-field&quot; placeholder=&quot;类别名称&quot;&gt;&#10;        &lt;input type=&quot;text&quot; id=&quot;newCategoryIcon&quot; class=&quot;input-field&quot; placeholder=&quot;图标 (emoji)&quot;&gt;&#10;        &lt;div class=&quot;modal-buttons&quot;&gt;&#10;            &lt;button class=&quot;btn-secondary&quot; id=&quot;cancelCategoryBtn&quot;&gt;取消&lt;/button&gt;&#10;            &lt;button class=&quot;btn-primary&quot; id=&quot;confirmCategoryBtn&quot;&gt;确认&lt;/button&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;div class=&quot;modal&quot; id=&quot;budgetModal&quot;&gt;&#10;    &lt;div class=&quot;modal-content&quot;&gt;&#10;        &lt;h3&gt;设置月度预算&lt;/h3&gt;&#10;        &lt;input type=&quot;number&quot; id=&quot;budgetInput&quot; class=&quot;input-field&quot; placeholder=&quot;预算金额&quot; step=&quot;0.01&quot;&gt;&#10;        &lt;div class=&quot;modal-buttons&quot;&gt;&#10;            &lt;button class=&quot;btn-secondary&quot; id=&quot;cancelBudgetBtn&quot;&gt;取消&lt;/button&gt;&#10;            &lt;button class=&quot;btn-primary&quot; id=&quot;confirmBudgetBtn&quot;&gt;确认&lt;/button&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js&quot;&gt;&lt;/script&gt;&#10;&lt;script src=&quot;app.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;zh-CN&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;&gt;&#10;    &lt;title&gt;记账本&lt;/title&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;&lt;!-- 头部预算进度 --&gt;&#10;&lt;div class=&quot;budget-header&quot;&gt;&#10;    &lt;div class=&quot;budget-info&quot;&gt;&#10;        &lt;div&gt;&#10;            &lt;div class=&quot;budget-label&quot;&gt;本月预算&lt;/div&gt;&#10;            &lt;div class=&quot;budget-amount&quot; id=&quot;budgetAmount&quot;&gt;未设置&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div&gt;&#10;            &lt;div class=&quot;budget-label&quot;&gt;今日支出&lt;/div&gt;&#10;            &lt;div class=&quot;budget-today&quot; id=&quot;todaySpent&quot;&gt;¥0.00&lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;budget-progress&quot;&gt;&#10;        &lt;div class=&quot;progress-bar&quot;&gt;&#10;            &lt;div class=&quot;progress-fill&quot; id=&quot;progressFill&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;budget-spent&quot;&gt;已花费: ¥&lt;span id=&quot;spentAmount&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 底部导航 --&gt;&#10;&lt;div class=&quot;bottom-nav&quot;&gt;&#10;    &lt;div class=&quot;nav-item active&quot; data-page=&quot;record&quot;&gt;&#10;        &lt;span class=&quot;nav-icon&quot;&gt;✏️&lt;/span&gt;&#10;        &lt;span class=&quot;nav-label&quot;&gt;记账&lt;/span&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;nav-item&quot; data-page=&quot;stats&quot;&gt;&#10;        &lt;span class=&quot;nav-icon&quot;&gt;&lt;/span&gt;&#10;        &lt;span class=&quot;nav-label&quot;&gt;统计&lt;/span&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;nav-item&quot; data-page=&quot;trend&quot;&gt;&#10;        &lt;span class=&quot;nav-icon&quot;&gt;&lt;/span&gt;&#10;        &lt;span class=&quot;nav-label&quot;&gt;趋势&lt;/span&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;nav-item&quot; data-page=&quot;list&quot;&gt;&#10;        &lt;span class=&quot;nav-icon&quot;&gt;&lt;/span&gt;&#10;        &lt;span class=&quot;nav-label&quot;&gt;明细&lt;/span&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 记账页面 --&gt;&#10;&lt;div class=&quot;page active&quot; id=&quot;recordPage&quot;&gt;&#10;    &lt;div class=&quot;page-content&quot;&gt;&#10;        &lt;div class=&quot;amount-input&quot;&gt;&#10;            &lt;span class=&quot;currency&quot;&gt;¥&lt;/span&gt;&#10;            &lt;input type=&quot;number&quot; id=&quot;amountInput&quot; placeholder=&quot;0.00&quot; step=&quot;0.01&quot;&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;form-group&quot;&gt;&#10;            &lt;label&gt;类别&lt;/label&gt;&#10;            &lt;div class=&quot;category-grid collapsed&quot; id=&quot;categoryGrid&quot;&gt;&lt;/div&gt;&#10;            &lt;button class=&quot;btn-toggle-category&quot; id=&quot;toggleCategoryBtn&quot;&gt;&#10;                &lt;span class=&quot;toggle-text&quot;&gt;展开更多&lt;/span&gt;&#10;                &lt;span class=&quot;toggle-icon&quot;&gt;▼&lt;/span&gt;&#10;            &lt;/button&gt;&#10;            &lt;button class=&quot;btn-add-category&quot; id=&quot;addCategoryBtn&quot;&gt;+ 新增类别&lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;form-group&quot;&gt;&#10;            &lt;label&gt;日期&lt;/label&gt;&#10;            &lt;input type=&quot;datetime-local&quot; id=&quot;dateInput&quot; class=&quot;input-field&quot;&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;form-group&quot;&gt;&#10;            &lt;label&gt;备注&lt;/label&gt;&#10;            &lt;textarea id=&quot;noteInput&quot; class=&quot;input-field&quot; placeholder=&quot;添加备注...&quot;&gt;&lt;/textarea&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;form-group&quot;&gt;&#10;            &lt;label&gt;照片&lt;/label&gt;&#10;            &lt;div class=&quot;photo-upload&quot;&gt;&#10;                &lt;input type=&quot;file&quot; id=&quot;photoInput&quot; accept=&quot;image/*&quot; style=&quot;display: none;&quot;&gt;&#10;                &lt;div class=&quot;photo-preview&quot; id=&quot;photoPreview&quot;&gt;&lt;/div&gt;&#10;                &lt;button class=&quot;btn-upload&quot; id=&quot;uploadBtn&quot;&gt; 上传照片&lt;/button&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;button class=&quot;btn-primary&quot; id=&quot;saveBtn&quot;&gt;保存&lt;/button&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 统计页面 --&gt;&#10;&lt;div class=&quot;page&quot; id=&quot;statsPage&quot;&gt;&#10;    &lt;div class=&quot;page-content&quot;&gt;&#10;        &lt;div class=&quot;date-selector&quot;&gt;&#10;            &lt;button class=&quot;date-btn active&quot; data-period=&quot;day&quot;&gt;日&lt;/button&gt;&#10;            &lt;button class=&quot;date-btn&quot; data-period=&quot;month&quot;&gt;月&lt;/button&gt;&#10;            &lt;button class=&quot;date-btn&quot; data-period=&quot;year&quot;&gt;年&lt;/button&gt;&#10;            &lt;input type=&quot;datetime-local&quot; id=&quot;statsDate&quot; class=&quot;date-input&quot;&gt;&#10;        &lt;/div&gt;&#10;        &lt;canvas id=&quot;pieChart&quot;&gt;&lt;/canvas&gt;&#10;        &lt;div class=&quot;stats-list&quot; id=&quot;statsList&quot;&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 趋势页面 --&gt;&#10;&lt;div class=&quot;page&quot; id=&quot;trendPage&quot;&gt;&#10;    &lt;div class=&quot;page-content&quot;&gt;&#10;        &lt;div class=&quot;trend-controls&quot;&gt;&#10;            &lt;select id=&quot;trendCategory&quot; class=&quot;select-field&quot;&gt;&#10;                &lt;option value=&quot;all&quot;&gt;全部类别&lt;/option&gt;&#10;            &lt;/select&gt;&#10;            &lt;select id=&quot;trendPeriod&quot; class=&quot;select-field&quot;&gt;&#10;                &lt;option value=&quot;7&quot;&gt;最近7天&lt;/option&gt;&#10;                &lt;option value=&quot;30&quot;&gt;最近30天&lt;/option&gt;&#10;                &lt;option value=&quot;90&quot;&gt;最近90天&lt;/option&gt;&#10;            &lt;/select&gt;&#10;        &lt;/div&gt;&#10;        &lt;canvas id=&quot;lineChart&quot;&gt;&lt;/canvas&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 明细页面 --&gt;&#10;&lt;div class=&quot;page&quot; id=&quot;listPage&quot;&gt;&#10;    &lt;div class=&quot;page-content&quot;&gt;&#10;        &lt;div class=&quot;timeline&quot; id=&quot;timeline&quot;&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;!-- 模态框 --&gt;&#10;&lt;div class=&quot;modal&quot; id=&quot;categoryModal&quot;&gt;&#10;    &lt;div class=&quot;modal-content&quot;&gt;&#10;        &lt;h3&gt;新增类别&lt;/h3&gt;&#10;        &lt;input type=&quot;text&quot; id=&quot;newCategoryName&quot; class=&quot;input-field&quot; placeholder=&quot;类别名称&quot;&gt;&#10;        &lt;input type=&quot;text&quot; id=&quot;newCategoryIcon&quot; class=&quot;input-field&quot; placeholder=&quot;图标 (emoji)&quot;&gt;&#10;        &lt;div class=&quot;modal-buttons&quot;&gt;&#10;            &lt;button class=&quot;btn-secondary&quot; id=&quot;cancelCategoryBtn&quot;&gt;取消&lt;/button&gt;&#10;            &lt;button class=&quot;btn-primary&quot; id=&quot;confirmCategoryBtn&quot;&gt;确认&lt;/button&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;div class=&quot;modal&quot; id=&quot;budgetModal&quot;&gt;&#10;    &lt;div class=&quot;modal-content&quot;&gt;&#10;        &lt;h3&gt;设置月度预算&lt;/h3&gt;&#10;        &lt;input type=&quot;number&quot; id=&quot;budgetInput&quot; class=&quot;input-field&quot; placeholder=&quot;预算金额&quot; step=&quot;0.01&quot;&gt;&#10;        &lt;div class=&quot;modal-buttons&quot;&gt;&#10;            &lt;button class=&quot;btn-secondary&quot; id=&quot;cancelBudgetBtn&quot;&gt;取消&lt;/button&gt;&#10;            &lt;button class=&quot;btn-primary&quot; id=&quot;confirmBudgetBtn&quot;&gt;确认&lt;/button&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js&quot;&gt;&lt;/script&gt;&#10;&lt;script src=&quot;app.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>